[["index.html", "Libro Personal de Apuntes Prefacio 0.1 Estructura del libro 0.2 Agradecimientos", " Libro Personal de Apuntes Hecho por Esteban Rucán Carrasco Prefacio Hola, mi nombre es Esteban Rucán, actual estudiante de cuarto año de la carrera de Estadística en la Pontificia Universidad Católica de Chile. Agradezco que hayas ingresado a mi libro personal. En él encontrarás apuntes de diversos temas que he realizado con mucha dedicación, con el fin de poder contribuir a quien lo necesite. Si este es tu caso, espero que disfrutes el material disponible. ¡Si tienes alguna sugerencia o duda no dudes en escribirme a mi correo!. Puedes difundir la información de este libro siempre y cuando me lo informes. 0.1 Estructura del libro El libro contiene apuntes enfocados principalmente en el lenguaje R, por lo que la mayoría de su contenido esta enfocado en este. Podrás navegar entre diversos tópicos sobre el lenguaje desde la barra lateral. También está habilitado un modo oscuro y un selector de fuente en la parte superior de tu pantalla. 0.2 Agradecimientos Sin duda, todos los conocimietos que tengo de R se los debo a los docentes que me han realizado clases, en conjunto a muchas plataformas para practicar el software. Si te identifica esta frase, te quiero dar mis sinceras gratitudes. En la próxima página encontrarás algunas páginas y libros interesantes, todo libre de Copyright. "],["recomendaciones.html", "Capítulo 1 Recomendaciones 1.1 Libros 1.2 Páginas web 1.3 Canales de Youtube 1.4 Aprendizaje interactivo", " Capítulo 1 Recomendaciones En esta sección te recomendaré una serie de libros y paginas web, para que de esta forma, expandas tus conocimientos de Programación, R y Estadística. 1.1 Libros Learn the tidyverse Mastering Software Development in R 1.2 Páginas web Documentación de R Traducción de R4DS: R para Ciencias de Datos Advanced R R Packages Interactive web-based data visualization with R, plotly, and shiny Do More with R TidyTuesday Julia Silge R-Ladies Global 1.3 Canales de Youtube StatQuest with Josh Starmer RStudio Bruno Rodrigues LatinR IDG TECHtalk 1.4 Aprendizaje interactivo HackerRank DataCamp "],["guiaestilo.html", "Capítulo 2 Guía de Estilo 2.1 Directorio 2.2 Archivos del directorio 2.3 Asignación de variables 2.4 Operadores 2.5 Paréntesis 2.6 Comas 2.7 Punto y coma 2.8 Packages 2.9 Cantidad de código por fila", " Capítulo 2 Guía de Estilo Esta guía la realice con el fin de que puedas programar tu código de la forma más ordenada posible, logrando que sea comprensible por los demás. Puedes inventar tus propias reglas, para acostumbrarte a programar bajo diferentes normas. Basada en la guía de estilo de tidyverse y PEP 8. 2.1 Directorio Siempre usaremos un directorio que nos aporte una ruta relativa. Lo haremos a través de la creación de proyectos. 2.2 Archivos del directorio Los archivos del directorio serán nombrados usando guiones medios o guiones bajos en vez de espacios y letras minúsculas. Tampoco usaremos caracteres especiales como los tildes. Usaremos fecha de creación (en formato ISO 8601) y nombres explicativos. Ejemplo: # Guardamos un archivo &#39;csv&#39; en el directorio # Mal data(iris) write.csv(iris, &#39;base.csv&#39;) # Bien data(iris) write.csv(iris, &#39;2021-03-26_iris-sin-procesar.csv&#39;) 2.3 Asignación de variables Usaremos el formato snake_case para nombrar variables, o sea, escritas en minúsculas, sin caracteres especiales (como el punto) y creando espacios mediante guiones bajos. Para asignar variables usaremos el operador &lt;- en vez de =. Solo usaremos = para definir argumentos dentro de funciones. Preferiremos nombres de variables informativos. Ejemplo: # Mal String.Hola = &#39;Hola mundo&#39; # Bien string_hola &lt;- &#39;Hola mundo&#39; 2.4 Operadores Siempre usaremos espacios a los lados de los operadores. Ejemplo: # Mal suma&lt;-3*5+2&lt;=24^2 # Bien suma &lt;- 3 * 5 + 2 &lt;= 24 ^ 2 2.5 Paréntesis Para las funciones for, while, function, if y else if antepondremos un espacio antes de usar paréntesis. Después de cerrar paréntesis en estas funciones, haremos un espacio y pondremos solo la llave de apertura en la misma línea, y abajo pondremos la llave de cierre. Ejemplo: # Mal for(i in 1:5){runif(i) print(i)} # Bien for (i in 1:5) { runif(i) print(i) } 2.6 Comas Después de escribir una coma, adicionamos un espacio. Ejemplo: # Mal notas_finales &lt;- c(NA,6.5,7,5.2) promedio_de_notas &lt;- mean(notas_finales,na.rm = TRUE) # Bien notas_finales &lt;- c(NA, 6.5, 7, 5.2) promedio_de_notas &lt;- mean(notas_finales, na.rm = TRUE) 2.7 Punto y coma No usaremos una linea para realizar más de una ejecución usando ;. Ejemplo # Mal valores_aleatorios &lt;- runif(10); mean(valores_aleatorios) # Bien valores_aleatorios &lt;- runif(10) mean(valores_aleatorios) 2.8 Packages Declararemos explícitamente los nombres de los packages de procedencia al momento de usar una función, a excepción de los packages que se cargan automáticamente al iniciar R y packages que permiten utilizar pipes (por ejemplo: %&gt;%). Ejemplo: data(iris) # Mal require(magrittr) require(dplyr) filtro_sepal_length &lt;- iris %&gt;% filter(Sepal.Length &gt;= 7.4) %&gt;% arrange(Sepal.Length) # Bien require(magrittr) filtro_sepal_length &lt;- iris %&gt;% dplyr::filter(Sepal.Length &gt;= 7.4) %&gt;% dplyr::arrange(Sepal.Length) 2.9 Cantidad de código por fila Esta no debe exceder los 80 caracteres (es posible añadir una línea vertical a RStudio para tener una referencia de los 80 caracteres). Algunas buenas prácticas es separar en líneas los argumentos de una función, o separar en líneas la utilización de pipes. Ejemplo: # Mal require(magrittr) data(iris) iris %&gt;% dplyr::filter(Sepal.Length &gt;= 7) %$% plot(x = Sepal.Length, y = Sepal.Width, main = &#39; Gráfico de Sepal&#39;) # Bien iris %&gt;% dplyr::filter(Sepal.Length &gt;= 7) %$% plot(x = Sepal.Length, y = Sepal.Width, main = &#39; Gráfico de Sepal&#39;) "],["rutas-importación-y-exportación-de-datos-en-r.html", "Capítulo 3 Rutas, Importación y exportación de datos en R 3.1 Rutas 3.2 Importación y exportación de archivos de texto plano. 3.3 Importación y exportación de archivos de texto no plano. 3.4 Bonus 3.5 Bonus 2", " Capítulo 3 Rutas, Importación y exportación de datos en R En esta sección veremos como importar diversos formatos de archivos a R, utilizando distintas funciones y packages. Además veremos como escribir rutas de forma más fácil. 3.1 Rutas 3.1.1 Rutas Absolutas Hacen referencia a la ruta completa en que se ubica cierto archivo. En mi caso estoy trabajando este archivo en la siguiente ruta absoluta: getwd() [1] &quot;D:/Otros/web/personal-book&quot; Podemos ver los archivos que hay en la ruta con el siguiente comando: list.files() [1] &quot;_bookdown.yml&quot; [2] &quot;_bookdown_files&quot; [3] &quot;_output.yml&quot; [4] &quot;01-recomendaciones.Rmd&quot; [5] &quot;02-guia-de-estilo.Rmd&quot; [6] &quot;03-rutas-importacion-exportacion.Rmd&quot; [7] &quot;04-magrittr-dplyr.Rmd&quot; [8] &quot;05-dataviz.Rmd&quot; [9] &quot;06-ggplot2.Rmd&quot; [10] &quot;07-rmarkdown.Rmd&quot; [11] &quot;08-mis-proyectos.Rmd&quot; [12] &quot;09-palabras-finales.Rmd&quot; [13] &quot;10-referencias.Rmd&quot; [14] &quot;book.bib&quot; [15] &quot;css&quot; [16] &quot;data&quot; [17] &quot;datasets&quot; [18] &quot;datos&quot; [19] &quot;docs&quot; [20] &quot;figuras&quot; [21] &quot;images&quot; [22] &quot;index.Rmd&quot; [23] &quot;latex&quot; [24] &quot;packages.bib&quot; [25] &quot;personal-book.Rmd&quot; [26] &quot;personal-book.Rproj&quot; [27] &quot;personal-book_files&quot; [28] &quot;personal-bookdown_files&quot; [29] &quot;README.md&quot; 3.1.2 Rutas relativas Son una abreviación de las rutas absolutas, basicamente sirve para no escribir la ruta bsoluta al momento de hacer alusión a un archivo. Podemos hacer uso de estas a través de crear un proyecto en RStudio, o establecer un directorio de trabajo con la siguiente función. En mi caso estableceré como directorio de trabajo la ruta absoluta /mnt/c/users/esteb/Desktop 2/Otros/web/personal-book. setwd(&quot;/mnt/c/users/esteb/Desktop 2/Otros/web/personal-book&quot;) En la seguiente sección haremos ejemplos prácticos sobre usos de rutas relativas. 3.2 Importación y exportación de archivos de texto plano. Que un archivo sea de texto plano significa que al momento de abrir un atchivo en un visor de texto (como el Bloc de Notas), se puede ver explícitamente una representación de sus filas, columnas o anidamientos. Para ello usaremos rutas relativas. Una herramienta potente para trabajar con estas, es usar la función here del package here. install.packages(&#39;here&#39;) Para ver mi directorio de trabajo usando el package here. here::here() [1] &quot;D:/Otros/web/personal-book&quot; Para obtener la ruta donde esta ubicada la carpeta datasets de mi directorio de trabajo. here::here(&#39;datasets&#39;) [1] &quot;D:/Otros/web/personal-book/datasets&quot; Para usar la ruta del archivo datos.csv ubicado en la carpeta datasets de mi directorio de trabajo. here::here(&#39;datasets&#39;, &#39;datos.csv&#39;) [1] &quot;D:/Otros/web/personal-book/datasets/datos.csv&quot; Notar que podemos escribir las carpetas y archivos separadas por comas para acceder a las distintas rutas que necesitemos. En todas las funciones que usemos para importar y exportar archivos, debemos especificar la ruta del archivo como primer argumento. ¡Empezar a usar la función here puede ser una muy buena idea!. Para importar archivos a R usaremos los siguientes packages: install.packages(&#39;readr&#39;) # Crea objetos del tipo tibble install.packages(&#39;rio&#39;) # Crea objetos del tipo data.frame install.packages(&#39;vroom&#39;) # Crea objetos del tipo tibble install.packages(&#39;readxl&#39;) # Crea objetos del tipo tibble install.packages(&#39;jsonlite&#39;) # Crea objetos del tipo lista Sin embargo, también usaremos funciones que facilita la base de R (Retornan objetos del tipo data.frame), para ello podemos agregar a las funciones los siguientes argumentos: header: Cuando es TRUE, indicamos a la función que la primera línea del archivo corresponde a los nombres de las variables. stringsAsFactors: Si es TRUE se establecen las variables del tipo character como factor. 3.2.1 Formato .csv. (comma-separated values) Para importar un archivo .csv usamos: # Opción 1 datos &lt;- read.csv(here::here(&#39;datasets&#39;, &#39;datos.csv&#39;)) # Importa un objeto del tipo data.frame # Opción 2 datos &lt;- readr::read_csv(here::here(&#39;datasets&#39;, &#39;datos.csv&#39;)) Asegurarse de que el archivo tiene filas efectivamente separadas por comas, en caso de que estén separadas por ; usar read.csv2 y readr::read_csv2 respectivamente. Para exportar un archivo en formato .csv usamos: # Opción 1 write.csv(objeto, here::here(&#39;datasets&#39;, &#39;nuevo-archivo.csv&#39;)) # Opción 2 readr::write_csv(objeto, here::here(&#39;datasets&#39;, &#39;nuevo-archivo.csv&#39;)) # Considera nombre de las filas 3.2.2 Formato .txt (text) Para importar archivos con esta extensión podemos usar: datos &lt;- read.table(here::here(&#39;datasets&#39;, &#39;datos.txt&#39;)) datos &lt;- readr::read_table(here::here(&#39;datasets&#39;, &#39;datos.txt&#39;)) Para exportar este tipo de formato usamos: write.table(here::here(objeto, &#39;datasets&#39;, &#39;nuevo-archivo.txt&#39;)) 3.2.3 Formato .tsv (tab separed values) Para importar este formato de archivo usaremos: datos &lt;- readr::read_tsv(here::here(&#39;datasets&#39;, &#39;datos.tsv&#39;)) Y para exportar a este formato de archivo usaremos: readr::write_tsv(objeto, here::here(&#39;datasets&#39;, &#39;nuevo-archivo.tsv&#39;)) 3.2.4 Formato generalizado Es posible importar cualquier extensión de archivo de texto plano que represente una base de datos rectangular a R, se hace de la siguiente forma: datos &lt;- read.delim(here::here(&#39;datasets&#39;, &#39;datos.tsv&#39;), sep = &#39;\\t&#39;) datos &lt;- read.delim(here::here(&#39;datasets&#39;, &#39;datos.csv&#39;), sep = &#39;;&#39;) # Etc 3.2.5 Formato .json (JavaScript object notation) Es una excepción, ya que no es una base de datos rectangular como las vistas anteriormente, sino que son listas anidadas. Importaremos este tipo de archivos de la siguiente forma: datos &lt;- jsonlite::read_json(here::here(&#39;datasets&#39;, &#39;datos.json&#39;)) Para exportar un archivo con expansión .json: jsonlite::write_json(objeto, here::here(&#39;datasets&#39;, &#39;nuevo-archivo.json&#39;)) 3.3 Importación y exportación de archivos de texto no plano. En este formato de archivos, no podemos ver explícitamente una representación de la base de datos como un archivo .xlsx, en el cuál no podemos ver su contenido a no ser de que usemos Microsoft Excel. 3.3.1 Formato .RDS Este formato de archivos es nativo de R, por lo que la lectura y exportación a este formato es muy eficiente y recomendada. Para importar datos con esta extensión usamos: # Opción 1 datos &lt;- readRDS(here::here(&#39;datasets&#39;, &#39;datos.RDS&#39;)) # Opción 2 datos &lt;- readr::read_rds(here::here(&#39;datasets&#39;, &#39;datos.RDS&#39;)) Para exportar este formato de archivos # Opción 1 saveRDS(objeto, here::here(&#39;datasets&#39;, &#39;nuevo-archivo.RDS&#39;)) # Comprimé el tamaño del archivo creado, pero tarda más # Opción 2 readr::write_rds(objeto, here::here(&#39;datasets&#39;, &#39;nuevo-archivo.RDS&#39;)) # No comprime el tamaño del archivo creado, pero tarda menos 3.3.2 Formato .xlsx y .xls. Para importar estos formatos de archivo provenientes de Excel, usaremos, datos &lt;- readxl::read_excel(here::here(&#39;datasets&#39;, &#39;datos.xlsx&#39;)) datos &lt;- readxl::read_excel(here::here(&#39;datasets&#39;, &#39;datos.xls&#39;)) 3.3.3 Comentario En vez de utilizar una ruta absoluta o relativa, podemos pegar un link directamente desde la web. datos &lt;- read.csv(&#39;https://covid.ourworldindata.org/data/owid-covid-data.csv&#39;) datos &lt;- readr::read_csv(&#39;https://covid.ourworldindata.org/data/owid-covid-data.csv&#39;) No funciona para archivos de Excel. 3.4 Bonus Si te preguntas sobre la existencia de alguna función que carge un archivo indistintamente de su extensión. ¡Claro que lo hay!. Por ejemplo la función import del package rio, acepta todos los formatos antes mencionados. # install.packages(&#39;rio&#39;) datos &lt;- rio::import(here::here(&#39;datasets&#39;, &#39;datos.xlsx&#39;)) datos &lt;- rio::import(here::here(&#39;datasets&#39;, &#39;datos.csv&#39;)) datos &lt;- rio::import(here::here(&#39;datasets&#39;, &#39;datos.json&#39;)) Acepta links de internet, incluso para archivos Excel. datos &lt;- rio::import(&#39;https://covid.ourworldindata.org/data/owid-covid-data.xlsx&#39;) 3.5 Bonus 2 Existe una función para cargar archivos de texto plano que representan bases bases de datos rectangulares, que es mucho más rápida que las funciones anteriormente vistas. Esta función es vroom del package vroom. Acepta links de sitios web. # install.packages(&#39;vroom&#39;) datos &lt;- vroom::vroom(here::here(&#39;datasets&#39;, &#39;datos.csv&#39;)) datos &lt;- vroom::vroom(here::here(&#39;datasets&#39;, &#39;datos.txt&#39;)) datos &lt;- vroom::vroom(&#39;https://covid.ourworldindata.org/data/owid-covid-data.csv&#39;) "],["transformación-de-datos-con-tidyverse.html", "Capítulo 4 Transformación de datos con Tidyverse 4.1 Importar un data frame en R 4.2 El package magrittr 4.3 El package dplyr 4.4 Actividades 4.5 Solución de Actividades", " Capítulo 4 Transformación de datos con Tidyverse En esta sección hablo sobre algunas nociones básicas de transformación de datos. Puedes acceder a una clase en video que realicé sobre este tema en el siguiente link. 4.1 Importar un data frame en R En vez de escribir nuestro directorio como data//covid//owid-covid-data.csv, podemos usar lo siguiente gracias al package here: # install.packages(&quot;vroom&quot;) # install.packages(&quot;here&quot;) data &lt;- vroom::vroom(here::here(&quot;data&quot;, &quot;covid&quot;, &quot;owid-covid-data.csv&quot;)) El package vroom acepta cualquier formato de archivo. 4.2 El package magrittr install.packages(&quot;maggritr&quot;) require(magrittr) Nos permite usar el famoso pipe %&gt;%. Es una forma más moderna y ordenada para programar en R. Usa la memoria del sistema de forma más eficiente. Se hace con CTRL o CMD + SHIFT + M. Su uso más común es para explorar bases de datos. 4.2.1 Ejemplos 4.2.1.1 \\(\\,\\) En vez de hacer: apply((matrix(1:100, ncol = 2)), 2, mean) [1] 25.5 75.5 Podemos hacer: 1:100 %&gt;% # Crear vector del 1 al 100 matrix(ncol = 2) %&gt;% # Crear una matriz con 2 columnas apply(2, mean) # Aplicar función mean a columnas [1] 25.5 75.5 Se ve mucho más  ordenado . 4.2.1.2 \\(\\,\\) Esto nos dará error 1:5 %&gt;% * 5 %&gt;% mean() Debemos hacer: 1:5 %&gt;% &quot;*&quot; (5) %&gt;% mean() [1] 15 Admite operadores como +, -, \"*\" y /. El valor numérico debe ir siempre entre paréntesis. 4.2.2 \\(\\,\\) Podemos crear una variable y después realizarle una modificación. suma_y_media &lt;- 1:10 %&gt;% &quot;+&quot; (50) suma_y_media [1] 51 52 53 54 55 56 57 58 59 60 Ahora calculamos la media: suma_y_media &lt;- suma_y_media %&gt;% mean() suma_y_media [1] 55.5 4.3 El package dplyr install.packages(&quot;dplyr&quot;) require(dplyr) Es una potente herramienta en conjunto a magrittr para analizar datos en R. Sus principales funciones son filter, group_by, summarize, mutate, arrange y select. 4.3.1 filter Sirve para indicarle a R que seleccione solo las filas que cumplan la condición que establezcamos. Ejemplo: Para empezar, veamos el tipo de variables de la base de datos iris. str(iris) &#39;data.frame&#39;: 150 obs. of 5 variables: $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... Ahora usemos la función filter para ver tuplas que solo tengan la variable Sepal.Length mayor o igual a 7.4: filtro_Sepal.Length &lt;- iris %&gt;% filter(Sepal.Length &gt;= 7.4) filtro_Sepal.Length %&gt;% reactable::reactable() # Para visualizar tablas de forma interactiva 4.3.2 group_by &amp; summarize Ambas deben ser usadas en conjunto. group_by: Sirve para agrupar según una variable categórica. Puede recibir más de una variable, según la necesidad que se tenga. summarize: Para mostrar la información que necesitamos ver después de usar group_by. Ejemplo: Veamos la media de Sepal.Length y Sepal.Width para cada especie. group_by_Species &lt;- iris %&gt;% group_by(Species) %&gt;% # Agrupamos según especie summarize(mean_Sepal.Width = mean(Sepal.Width), mean_Sepal.Length = mean(Sepal.Length)) # Información que necesitamos ver de cada Especie group_by_Species %&gt;% reactable::reactable() # Vizualizamos 4.3.3 mutate Podemos crear una variable nueva en la base de datos a partir de variables ya existentes. Ejemplo: Creamos una base de datos que en su última columna tenga información sobre la suma de Sepal.Length y Sepal.Width para cada tupla. mutate_iris &lt;- iris %&gt;% mutate(Sepal.Sum = Sepal.Length + Sepal.Width) # Creamos una variable Sepal.Sum mutate_iris %&gt;% reactable::reactable() Vemos que se creo una variable nueva al final de la base. 4.3.4 arrange Sirve para ordenar las columnas de la base de datos en orden ascendente o descendente. Se puede seleccionar más de una variable, según la necesidad que se tenga. Para ordenar las columnas de la base es necesario llamar a la función desc. Ejemplo: Para ordenar la columna de la variable Sepal.Width en orden ascendente: arrange_asc &lt;- iris %&gt;% arrange(Sepal.Width) arrange_asc %&gt;% reactable::reactable() Ordenar la columna Species en orden descendente: arrange_desc &lt;- iris %&gt;% arrange(desc(Species)) arrange_desc %&gt;% reactable::reactable() 4.3.5 select Sirve para seleccionar o no seleccionar variables de la base de datos. Para no seleccionar una variable hay que anteponer un signo ! y un vector con los nombres de las variables. Ejemplo: Para seleccionar variables: select_Sepal &lt;- iris %&gt;% select(Sepal.Length, Sepal.Width) # Alternativamente select(matches(&quot;Sepal&quot;)) select_Sepal %&gt;% reactable::reactable() Para no seleccionar variables: not_select_Sepal &lt;- iris %&gt;% select(!c(Sepal.Length, Sepal.Width)) # Alternativamente select(!matches(&quot;Sepal&quot;)) not_select_Sepal %&gt;% reactable::reactable() Podemos ver que están todas las variables menos las que escribimos en la función select. 4.4 Actividades 4.4.1 \\(\\,\\) Cargue la base de datos con información sobre el coronavirus desde https://ourworldindata.org/coronavirus-testing. Luego muestre el tipo de cada variable de la base. 4.4.2 \\(\\,\\) ¿Cuál es la media de casos en Chile en el mes de enero de 2021? 4.4.3 \\(\\,\\) Genere una tabla con la cantidad de test hechos en los países de América del Sur en el último mes, ordenado de menor a mayor. 4.4.4 \\(\\,\\) ¿Cuál es el país con mayor cantidad de casos por millón de habitantes en Europa desde el inicio de la pandemia? ¿Y el segundo? 4.4.5 \\(\\,\\) Muestre información sobre la cantidad de casos que han habido en las últimas 2 semanas en cada continente. 4.5 Solución de Actividades 4.5.1 Actividad 1 require(ggplot2); require(gghighlight); require(magrittr); require(dplyr) data &lt;- vroom::vroom(here::here(&quot;data&quot;, &quot;covid&quot;, &quot;owid-covid-data.csv&quot;)) data %&gt;% str() spec_tbl_df [78,664 x 59] (S3: spec_tbl_df/tbl_df/tbl/data.frame) $ iso_code : chr [1:78664] &quot;AFG&quot; &quot;AFG&quot; &quot;AFG&quot; &quot;AFG&quot; ... $ continent : chr [1:78664] &quot;Asia&quot; &quot;Asia&quot; &quot;Asia&quot; &quot;Asia&quot; ... $ location : chr [1:78664] &quot;Afghanistan&quot; &quot;Afghanistan&quot; &quot;Afghanistan&quot; &quot;Afghanistan&quot; ... $ date : Date[1:78664], format: &quot;2020-02-24&quot; ... $ total_cases : num [1:78664] 1 1 1 1 1 1 1 1 2 4 ... $ new_cases : num [1:78664] 1 0 0 0 0 0 0 0 1 2 ... $ new_cases_smoothed : num [1:78664] NA NA NA NA NA 0.143 0.143 0 0.143 0.429 ... $ total_deaths : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_deaths : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_deaths_smoothed : num [1:78664] NA NA NA NA NA 0 0 0 0 0 ... $ total_cases_per_million : num [1:78664] 0.026 0.026 0.026 0.026 0.026 0.026 0.026 0.026 0.051 0.103 ... $ new_cases_per_million : num [1:78664] 0.026 0 0 0 0 0 0 0 0.026 0.051 ... $ new_cases_smoothed_per_million : num [1:78664] NA NA NA NA NA 0.004 0.004 0 0.004 0.011 ... $ total_deaths_per_million : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_deaths_per_million : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_deaths_smoothed_per_million : num [1:78664] NA NA NA NA NA 0 0 0 0 0 ... $ reproduction_rate : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ icu_patients : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ icu_patients_per_million : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ hosp_patients : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ hosp_patients_per_million : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ weekly_icu_admissions : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ weekly_icu_admissions_per_million : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ weekly_hosp_admissions : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ weekly_hosp_admissions_per_million : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_tests : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ total_tests : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ total_tests_per_thousand : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_tests_per_thousand : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_tests_smoothed : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_tests_smoothed_per_thousand : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ positive_rate : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ tests_per_case : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ tests_units : chr [1:78664] NA NA NA NA ... $ total_vaccinations : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ people_vaccinated : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ people_fully_vaccinated : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_vaccinations : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_vaccinations_smoothed : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ total_vaccinations_per_hundred : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ people_vaccinated_per_hundred : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ people_fully_vaccinated_per_hundred : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ new_vaccinations_smoothed_per_million: num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ stringency_index : num [1:78664] 8.33 8.33 8.33 8.33 8.33 ... $ population : num [1:78664] 38928341 38928341 38928341 38928341 38928341 ... $ population_density : num [1:78664] 54.4 54.4 54.4 54.4 54.4 ... $ median_age : num [1:78664] 18.6 18.6 18.6 18.6 18.6 18.6 18.6 18.6 18.6 18.6 ... $ aged_65_older : num [1:78664] 2.58 2.58 2.58 2.58 2.58 ... $ aged_70_older : num [1:78664] 1.34 1.34 1.34 1.34 1.34 ... $ gdp_per_capita : num [1:78664] 1804 1804 1804 1804 1804 ... $ extreme_poverty : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ cardiovasc_death_rate : num [1:78664] 597 597 597 597 597 ... $ diabetes_prevalence : num [1:78664] 9.59 9.59 9.59 9.59 9.59 9.59 9.59 9.59 9.59 9.59 ... $ female_smokers : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ male_smokers : num [1:78664] NA NA NA NA NA NA NA NA NA NA ... $ handwashing_facilities : num [1:78664] 37.7 37.7 37.7 37.7 37.7 ... $ hospital_beds_per_thousand : num [1:78664] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ... $ life_expectancy : num [1:78664] 64.8 64.8 64.8 64.8 64.8 ... $ human_development_index : num [1:78664] 0.511 0.511 0.511 0.511 0.511 0.511 0.511 0.511 0.511 0.511 ... - attr(*, &quot;spec&quot;)= .. cols( .. iso_code = col_character(), .. continent = col_character(), .. location = col_character(), .. date = col_date(format = &quot;&quot;), .. total_cases = col_double(), .. new_cases = col_double(), .. new_cases_smoothed = col_double(), .. total_deaths = col_double(), .. new_deaths = col_double(), .. new_deaths_smoothed = col_double(), .. total_cases_per_million = col_double(), .. new_cases_per_million = col_double(), .. new_cases_smoothed_per_million = col_double(), .. total_deaths_per_million = col_double(), .. new_deaths_per_million = col_double(), .. new_deaths_smoothed_per_million = col_double(), .. reproduction_rate = col_double(), .. icu_patients = col_double(), .. icu_patients_per_million = col_double(), .. hosp_patients = col_double(), .. hosp_patients_per_million = col_double(), .. weekly_icu_admissions = col_double(), .. weekly_icu_admissions_per_million = col_double(), .. weekly_hosp_admissions = col_double(), .. weekly_hosp_admissions_per_million = col_double(), .. new_tests = col_double(), .. total_tests = col_double(), .. total_tests_per_thousand = col_double(), .. new_tests_per_thousand = col_double(), .. new_tests_smoothed = col_double(), .. new_tests_smoothed_per_thousand = col_double(), .. positive_rate = col_double(), .. tests_per_case = col_double(), .. tests_units = col_character(), .. total_vaccinations = col_double(), .. people_vaccinated = col_double(), .. people_fully_vaccinated = col_double(), .. new_vaccinations = col_double(), .. new_vaccinations_smoothed = col_double(), .. total_vaccinations_per_hundred = col_double(), .. people_vaccinated_per_hundred = col_double(), .. people_fully_vaccinated_per_hundred = col_double(), .. new_vaccinations_smoothed_per_million = col_double(), .. stringency_index = col_double(), .. population = col_double(), .. population_density = col_double(), .. median_age = col_double(), .. aged_65_older = col_double(), .. aged_70_older = col_double(), .. gdp_per_capita = col_double(), .. extreme_poverty = col_double(), .. cardiovasc_death_rate = col_double(), .. diabetes_prevalence = col_double(), .. female_smokers = col_double(), .. male_smokers = col_double(), .. handwashing_facilities = col_double(), .. hospital_beds_per_thousand = col_double(), .. life_expectancy = col_double(), .. human_development_index = col_double() .. ) - attr(*, &quot;problems&quot;)=&lt;externalptr&gt; 4.5.2 Actividad 2 media_casos_chile_enero_2021 &lt;- data %&gt;% filter(location == &quot;Chile&quot;) %&gt;% filter(date &gt;= &quot;2021-01-01&quot; &amp; date &lt;= &quot;2021-01-31&quot;) %&gt;% group_by(location) %&gt;% summarize(media_casos = mean(new_cases, na.rm = TRUE)) media_casos_chile_enero_2021 %&gt;% reactable::reactable() 4.5.3 Actividad 3 test_latinoamerica_ultimo_mes &lt;- data %&gt;% filter(continent == &quot;South America&quot;) %&gt;% filter(date &gt;= &quot;2021-01-10&quot; &amp; date &lt;= &quot;2021-02-10&quot;) %&gt;% filter(!is.na(new_tests)) %&gt;% group_by(location) %&gt;% summarize(total_test = sum(new_tests)) %&gt;% arrange(total_test) test_latinoamerica_ultimo_mes %&gt;% reactable::reactable() 4.5.4 Actividad 4 paises_europa_xmill &lt;- data %&gt;% filter(continent == &quot;Europe&quot;) %&gt;% filter(!is.na(new_cases_per_million)) %&gt;% group_by(location) %&gt;% summarize(cases_per_million = sum(new_cases_per_million)) %&gt;% arrange(desc(cases_per_million)) paises_europa_xmill %&gt;% reactable::reactable() 4.5.5 Actividad 5 casos_contientes_2_semanas &lt;- data %&gt;% filter(date &gt;= &quot;2021-01-27&quot; &amp; date &lt;= &quot;2021-02-10&quot;) %&gt;% filter(!is.na(new_cases)) %&gt;% group_by(continent) %&gt;% summarize(casos = sum(new_cases)) casos_contientes_2_semanas %&gt;% reactable::reactable() "],["principios-de-visualización-de-datos.html", "Capítulo 5 Principios de Visualización de Datos 5.1 Carga cognitiva 5.2 Principios de Gestalt 5.3 Público 5.4 Etiquetas y ejes. 5.5 Tipos de gráficos 5.6 Reportes 5.7 Colores 5.8 Construcción de paletas de colores 5.9 Recomendaciones de visualización de datos", " Capítulo 5 Principios de Visualización de Datos Escribo este capítulo para difundir lo importante que es generar una buena visualización de datos. Con el paso del tiempo, he visto muy malas prácticas y escribir esto es una de aportar con un pequeño grano de arena a crear visualización eficientes y fáciles de entender. Es una recopilación de varias fuentes, en conjunto a los conocimientos que tengo sobre este tema. Lo pasé muy bien escribiendo sobre este tema, ojalá puedas pasarlo de la misma forma. ¡Gracias por darte el tiempo de leer esto! Obtendrás conocimientos muy útiles sobre visualizaciones de datos. 5.1 Carga cognitiva Es el esfuerzo que nos demanda procesar y retener determinada información. La percepción visual ayuda a reducir la carga cognitiva, ayudando a entender las cosas de mejor forma, más fácil y dando la posibilidad de retener la información con el paso del tiempo. Para ejemplificar la reducción de carga cognitiva, se mostrarán dos paneles de gráficos. ¿Cuál gráfico cumple de mejor forma su objetivo y reduce la carga cognitiva? Contrastando las figuras 1 y 2, es más fácil comparar Chile con el resto de Sudamérica en la Figura 2. Al visualizar datos, los elementos del gráfico deben cumplir una función específica y no distraer al usuario del mensaje que se intenta comunicar. Debes disminuir en la mayor cantidad posible los códigos visuales innecesarios. 5.2 Principios de Gestalt Figure 5.1: Figura 3Fuente: toptal.com Semejanza: La mente humana agrupa cosas similares. Relacionamos que elementos son del mismo tipo si mantienen forma, tamaño, color u alguna característica de similitud. Figure 5.2: Figura 4Fuente: toptal.com Cierre: Nuestro cerebro completará partes faltantes de una imagen para crear un todo. El ojo humano creará una linea punteada para completar las imágenes. Figure 5.3: Figura 5Fuente: toptal.com Continuidad: El ojo humano eligirá el camino mas suave para seguir las líneas, independiente de su forma, color o tamaño. En este caso nuestros ojos seguirán la tendencia creciente que hay entre las dos variables, recorriendo la linea recta de alguna u otra forma. Proximidad: Objetos que estén cercanos entre sí, nos haran pensar que forman parte de un grupo. Seguramente en el primer gráfico, asociaste los elementos que están en la parte inferior izquierda como un grupo, y efectivamente lo son. Figura y fondo: Nos muestra que nuestro cerebro encuentran un enfoco visual separando la figura del fondo. Es recomendable generar contrastes entre la figura (los elementos del gráfico) y el fondo. Simetría y orden: Las figuras simétricas o geométricas simples y regulares se perciben como un conjunto. Figure 5.4: Figura 9Fuente: toptal.com En este caso, nuestra mente interpreta las figuras de la parte izquierda como un triángulo, un círculo y un cuadrado respectivamente, a pesar de que estén superpuestas entre sí y tengan el mismo color en común. 5.3 Público Un tema muy importante es saber a que público debes adaptar tus gráficos y colores. 5.3.1 Conoce al usuario El factor edad puede influir en el tamaño de la letra y el contraste de los colores y el fondo. La ubicación geográfica puede incidir en la capacidad de conexión a Internet y el lenguaje usado. El nivel socio-económico puede determinar factores como el acceso a dispositivos, su tipo y acceso a impresiones a color. El mejor gráfico es el que puede ser interpretado sencillamente por el público objetivo, por lo que tienes que tener cuidado en la sencillez o dificultad de estos. 5.4 Etiquetas y ejes. Algunas buenas practicas generales son añadir etiquetas de ejes y título, uso de leyendas y colores adecuados según lo que necesitas transmitir. En el caso de las etiquetas de ejes, es una buena practica incluir la unidad de medida que se utiliza en la variable. Usar pocas fuentes tipográficas, ya que pueden añadir una carga visual innecesaria y restar legibilidad a los gráficos. En este caso es recomendable usar fuentes que solo mejoren la interpretabilidad. El estilo de las etiquetas debe estar alineado al mensaje que necesitas entregar. Los títulos pueden tener una mayor libertad en cuanto a fuentes tipográficas, al tener un gran tamaño. En cada tipo de gráfico debes considerar una grilla adecuada, eliminando las grillas que no sean fundamentales para comprender la gráfica. Presta atención a la posición de las etiquetas, ya que también pueden incidir en su interpretabilidad. 5.5 Tipos de gráficos En esta sección analizaré las gráficas más usadas y errores que se puedan cometer. Figure 5.5: Figura 10 Este es un típico ejemplo en que se altera el gráfico para hacer notar una tendencia que no es como parece. Es recomendable dejar que los datos hablen por si solos, sin alterar la información visual que producen. Otra mala práctica es el cherry-picking, esto es seleccionar solo datos que confirmen o demuestren nuestra teoría. Todos los elementos deben ser incluidos de forma armónica, ya que su fin es mejorar y ayudar a mejorar la interpretabilidad de los gráficos. 5.5.1 El gráfico de barras Es un gráfico fácil de interpretar, a través de barras se pueden hacer comparaciones rápidas a simple vista. Se recomienda ordenar las categorías del gráfico según un orden, para que sea notoria la tendencia que deseas comunicar, al igual que colorear las barras según otra variable de interés. Además, si las categorías tienen muchos caracteres y se superponen entre sí, es recomendable cambiar de orientación el gráfico Un buen ejemplo es esta visualización de redes sociales: Figure 5.6: Figura 11 5.5.2 Gráfico de pie Muestra la distribución de las frecuencias a través de dividir el área total de un círculo en partes que representen la frecuencia de cada categoría. También puedes optar al gráfico de dona, que es el gráfico de pie pero sin su zona central. No uses gráficos de pie cuando: Tengas más de 5 categorías. Tengas variables con categorías con valores muy similares. Por ejemplo, si tienes una categoría con valores 35%, 36% y 37% y quieres mostrar que hay diferencias en los porcentajes, es mejor pensar en otro tipo de gráfico como el de barras, porque se llevará más tiempo entenderlo y al ojo humano se le dificultará encontrar esas pequeñas diferencias. Si dentro de tu gráfico la mayoría de las categorías es representada por valores pequeños, es mejor utilizar otro gráfico, ya que en estos gráficos podrían llegar a perderse o verse demasiado pequeñas y resultará más difícil interpretarlos para la audiencia. También si en tu gráfico tienes categorías con valores iguales es mejor que cambies de gráfico. Es decir si tienes categoría como A: 15%, B: 12%, C: 15%, D: 12% y E: 8%, es mejor cambiar de gráfico porque no se podrá ver rápidamente la distribución de los datos. Un ejemplo de buen uso de gráfico de pie es el siguiente: Figure 5.7: Figura 12 5.5.3 El gráfico de dispersión. Conocido también como scatter plot o gráfico de puntos. Esta visualización se usa para encontrar relaciones existentes entre dos variables. Las relaciones existentes son del tipo: Lineal, logarítmica, exponencial, etc. Fuerte o débil. Positiva o Negativa. Puedes añadir una linea o curva que haga notar la tendencia que intentas comunicar. También puedes etiquetar cada punto, pero cuidado con tener un exceso de texto que dificulte la interpretación del gráfico. Evita usar este gráfico cuando cuentas con muchos datos, porque las relaciones suelen hacerse menos evidentes. En este caso es mejor usar un mapa de calor. También evita usar gráficos de puntos con tres dimensiones, se hace complicado comparar en tres ejes al mismo tiempo. Figure 5.8: Figura 13 5.5.4 Mapas de calor Los mapas de calor son muy útiles en grandes conjuntos de datos, ya que pueden representar fácilmente la densidad de los puntos que conforman una tabla. Como muestran la densidad de puntos en determinada zona de un gráfico, no son efectivos cuando se cuentan con pocos datos. Este ejemplo de eye-tracking muestra en que zonas las personas tienen una mayor interactividad en una determinada página web. Figure 5.9: Figura 14 5.5.5 La gráfica de tabla Estas son las típicas tablas de datos. Deben ser entendibles para la audiencia, por lo que debemos tener en cuenta la expertiz del público. Se recomienda etiquetar con colores los valores para facilitar la interpretación. También es recomendado acompañar las tablas de un gráfico, para dar en evidencia lo que se exhibe en las tablas. Figure 5.10: Figura 15 Figure 5.11: Tabla 1 5.6 Reportes Los reportes son un conglomerado de visualizaciones de datos que comunican determinados mensajes para generar una toma de decisiones sencilla. 5.6.1 Factores a considerar Concentran los resultados, van directo al grano. Generan una fácil retención de resultados con poco esfuerzo. Deben narrar una historia, concepto asociado a storytelling. Figure 5.12: Figura 16 5.7 Colores 5.7.1 Semiótica de colores Debes tomar en cuenta que los colores también representan un significado. Figure 5.13: Figura 19 Figure 5.14: Figura 20 No tan solo en marketing, en los gráficos también debes tomar en cuenta cuales son los colores más apropiados para usar. Figure 5.15: Figura 21 Intenta usar los colores adecuados para expresar las emociones correspondientes a través de los gráficos. Evita generar percepciones discriminatorias mediante el uso de los colores. 5.7.2 Daltonismo No todas las personas somos capaces de ver colores de igual forma, por lo que tienes que tener en cuenta este aspecto. Debes darle a todo el público la posibilidad de interpretar los colores con la misma facilidad. En este caso los colores deben ser muy distinguibles entre si. Figure 5.16: Figura 22 La Figura x muestra los tipos de daltonismo existente, para tomar en consideración los problemas que considera cada tipo. Una buena herramienta para crear paletas de colores pensando en personas daltónicas es Viz Palette desarrollada por Elijah Meeks y Susie Lu, puedes acceder desde el siguiente link. 5.8 Construcción de paletas de colores En esta sección hablaré de como usar colores en un gráfico según la situación en que te encuentres. Usar los colores adecuados evitará que el observador realice interpretaciones inadecuadas. Recuerda tomar en cuenta quienes son nuestros usuarios, para generar paletas de colores que se adapten a sus necesidades. Figure 5.17: Figura 23 5.8.1 Escalas cualitativas Se utilizan cuando las categorías no tienen un orden específico. Los colores no deben transmitir un orden y deben ser claramente distinguibles entre sí. 5.8.2 Escalas secuenciales Se usan para representar valores numéricos o categorías ordenadas. Son gradientes desde un color a otro. Deben dar cuenta de un valor mínimo y un valor máximo con los colores usados. Estas escalas suelen ser más llamativas cuando se introduce otro color en la paleta. 5.8.3 Escalas divergentes Son escalas de colores para medir variables extremas. Usan dos colores distintos en cada extremo y un color neutro a la mitad. Los colores extremos deben ser igual de llamativos. 5.9 Recomendaciones de visualización de datos https://www.datasketch.news/especiales https://www.r-graph-gallery.com/ https://www.openculture.com/2019/07/napoleons-disastrous-invasion-of-russia-explained-in-an-1869-data-visualization.html "],["gráficos-estáticos-con-ggplot2.html", "Capítulo 6 Gráficos estáticos con ggplot2 6.1 Primer gráfico con ggplot2 6.2 Aesthetics 6.3 Geoms 6.4 Labs 6.5 Lims 6.6 Temas 6.7 Gráfico ggplot como un objeto 6.8 Actividad 6.9 Solución de Actividad", " Capítulo 6 Gráficos estáticos con ggplot2 En esta sección podrás ver una guía introductoria a gráficos estáticos usando ggplot2. Sirve para hacer gráficos mucho más elegantes. Implementa el concepto de gramática de gráficos en capas. Cuenta con muchas opciones de personalización. Ve la clase que realicé en video desde el siguiente link. install.packages(&quot;ggplot2&quot;) require(ggplot2) Primero veamos las variables de la base de datos iris: iris %&gt;% str() &#39;data.frame&#39;: 150 obs. of 5 variables: $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... 6.1 Primer gráfico con ggplot2 Los gráficos con ggplot2 suelen tener la siguiente estructura # Llamado a la función &quot;ggplot&quot; e indicar base de datos con la información a graficar ggplot(data = iris) + # Aesthetics: Cómo dibujar los distintos trazos, formas y colores del gráfico, &quot;Bosquejo&quot; aes(x = Sepal.Length, y = Petal.Length) + # Geom del gráfico que necesitamos ver (puntos, lineas, barras, etc.) geom_point() Podemos omitir el nombre de los parámetros una vez que tengamos más practica. ggplot(iris) + aes(Sepal.Length, Petal.Length) + geom_point() 6.2 Aesthetics Acá vamos a indicar que variables van en el gráfico, en conjunto a parámetros adicionales según lo que necesitemos. x: Variable que va en el eje X. y: Variable que va en el eje Y. color: Dentro de las aesthetics significa colorear según una variable categórica. fill: Dentro de las aesthetics significa rellenar de un color según una variable categórica. Ejemplo: Hacer un scatter plot de Sepal.Length y Petal.Length que coloree los puntos según Species. ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() 6.3 Geoms Indica que tipo de gráfico necesitamos ver. Entre las principales geoms se encuentran: 6.3.1 geom_point() Es el gráfico de dispersión. Recomendado para identificar visualmente relaciones entre variables. Ejemplo: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() 6.3.2 geom_line() Es el gráfico de lineas. Recomendado para graficar series de tiempo. Ejemplo: require(datasets) data(&quot;economics&quot;) economics %&gt;% str spec_tbl_df [574 x 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame) $ date : Date[1:574], format: &quot;1967-07-01&quot; ... $ pce : num [1:574] 507 510 516 512 517 ... $ pop : num [1:574] 198712 198911 199113 199311 199498 ... $ psavert : num [1:574] 12.6 12.6 11.9 12.9 12.8 11.8 11.7 12.3 11.7 12.3 ... $ uempmed : num [1:574] 4.5 4.7 4.6 4.9 4.7 4.8 5.1 4.5 4.1 4.6 ... $ unemploy: num [1:574] 2944 2945 2958 3143 3066 ... ggplot(data = economics) + aes(x = date, y = unemploy) + geom_line() 6.3.3 geom_histogram Es el histograma. Sirve para ver la distribución de una variable Ejemplo: Al ser solo una variable, solo hay que especificar un argumento en aes. ggplot(data = iris) + aes(x = Sepal.Length) + geom_histogram() 6.3.4 geom_boxplot Es el gráfico de caja y bigote. Sirve para ver la dispersión y cuartiles de una variable. Ejemplo: Al ser solo una variable, solo hay que especificar un argumento en aes. ggplot(data = iris) + aes(y = Sepal.Length, fill = Species) + geom_boxplot() 6.3.5 geom_bar Es el gráfico de barras. Sirve para ver con longitudes proporcionales a los valores que representan. Ejemplo: ggplot(data = iris) + aes(x = Species, fill = Species) + geom_bar() Argumentos de un geom: aes(): En caso de querer usar una aesthetic distinta a la usada anteriormente. color: Colorea el gráfico según el color que indiquemos. Ejemplo: ggplot(data = economics) + aes(x = date, y = unemploy) + geom_line(color = &quot;dodgerblue1&quot;) fill: Rellena el gráfico según el color que indiquemos. Ejemplo: ggplot(data = iris) + aes(x = Sepal.Length) + geom_histogram(fill = &quot;deepskyblue1&quot;) Podemos añadirle el argumento color para colorear los contornos con otro color: ggplot(data = iris) + aes(x = Sepal.Length) + geom_histogram(color = &quot;deepskyblue4&quot;, fill = &quot;deepskyblue3&quot;) linetype: Para indicar el tipo de linea que necesitamos en el gráfico. Ejemplo: ggplot(data = economics) + aes(x = date, y = unemploy) + geom_line(linetype = &quot;longdash&quot;) size: Cambia el tamaño de la geom del gráfico. Ejemplo: ggplot(iris) + aes(Sepal.Length, Petal.Length) + geom_point(size = 3) alpha: Añade transparencia a la geom gráfico. Ejemplo: Añadir un 50% de transparencia al gráfico. ggplot(data = iris) + aes(x = Sepal.Length) + geom_histogram(color = &quot;deepskyblue4&quot;, fill = &quot;deepskyblue3&quot;, alpha = 0.5) 6.4 Labs Es una capa para indicar las etiquetas de Eje y título en los gráficos. Ejemplo: ggplot(data = economics) + aes(x = date, y = unemploy) + geom_line(color = &quot;brown4&quot;, linetype = &quot;solid&quot;) + labs(x = &quot;Año&quot;, y = &quot;Desempleo&quot;, title = &quot;Desempleo a través del tiempo&quot;, subtitle = &quot;1965 a 2010&quot;) 6.5 Lims Es una capa para indicar los límites de los ejes. Ejemplo. ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + lims(x = c(6, 8), y = c(4, NA)) 6.6 Temas Sirve para establecer un tema de fondo: Los temas que se pueden usar por defecto con ggplot2 son: theme_gray: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_gray() theme_bw: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_bw() theme_linedraw: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_linedraw() theme_light: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_light() theme_dark: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_dark() theme_minimal: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_minimal() theme_classic: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_classic() theme_void: ggplot(data = iris) + aes(x = Sepal.Length, y = Petal.Length, color = Species) + geom_point() + theme_void() ¡Puedes buscar muchos temas más en internet! 6.7 Gráfico ggplot como un objeto Podemos guardar un gráfico ggplot como un objeto de R. Es muy eficiente. Ejemplos: 6.7.1 1. Distintos Geoms Guardamos el gráfico como una variable grafico_Sepal.Length &lt;- ggplot(data = iris) + aes(x = Sepal.Length) Luego construimos los gráficos: Histograma grafico_Sepal.Length + geom_histogram(color = &quot;dodgerblue4&quot;, fill = &quot;dodgerblue3&quot;, alpha = 0.5) + theme_bw() Boxplot grafico_Sepal.Length + geom_boxplot(aes(fill = Species)) + coord_flip() + # Voltear ejes theme_light() 6.7.2 2. Gráficos interactivos No funcionan en archivos .pdf. Creamos una variable con el gráfico: # install.packages(&quot;plotly&quot;) # require(plotly) tiempo_y_desempleo &lt;- ggplot(data = economics) + aes(x = date, y = unemploy) + geom_line(color = &quot;brown4&quot;, linetype = &quot;solid&quot;) + labs(x = &quot;Año&quot;, y = &quot;Desempleo&quot;, title = &quot;Desempleo a través del tiempo&quot;, subtitle = &quot;1965 a 2010&quot;) + theme_bw() Creamos gráfico interactivo: # install.packages(plotly) tiempo_y_desempleo %&gt;% plotly::ggplotly() 6.8 Actividad Usando la base de datos de siguiente link, genere un gráfico de lineas para ver la evolución de la cantidad de casos por día en Chile, Argentina y Perú en enero de 2021. ¡Personalizelo a su gusto! Hint: Use dplyr y magrittr. 6.9 Solución de Actividad require(dplyr) require(magrittr) require(ggplot2) require(plotly) data &lt;- vroom::vroom(here::here(&quot;data&quot;, &quot;covid&quot;, &quot;owid-covid-data.csv&quot;)) chile_arg_peru_01_2021 &lt;- data %&gt;% select(location, date, new_cases) %&gt;% filter(location %in% c(&quot;Chile&quot;, &quot;Argentina&quot;, &quot;Peru&quot;)) %&gt;% filter(date &gt;= &quot;2021-01-01&quot; &amp; date &lt;= &quot;2021-01-31&quot;) %&gt;% filter(!is.na(new_cases)) grafico_actividad &lt;- ggplot(data = chile_arg_peru_01_2021) + aes(x = date, y = new_cases, color = location) + geom_line(size = 1) + labs(x = &quot;Fecha&quot;, y = &quot;Casos Nuevos&quot;, title = &quot;Nuevos casos por día en enero 2021&quot;, subtitle = &quot;Chile, Argentina y Perú&quot;, caption = &quot;Figura 1&quot;) + theme_bw() + scale_color_manual(labels = c(&quot;Arg&quot;, &quot;Chi&quot;, &quot;Per&quot;), # Nombre de Leyendas values = c(&quot;deepskyblue&quot;, &quot;red&quot;, &quot;gray&quot;)) + # Color de Leyendas guides(color = guide_legend(&quot;País&quot;)) # Título de Leyendas grafico_actividad %&gt;% ggplotly() "],["reportes-con-r-markdown.html", "Capítulo 7 Reportes con R Markdown 7.1 La estructura YAML 7.2 Markdown 7.3 Chunks 7.4 Tablas desde R 7.5 Imágenes 7.6 Reportes automáticos 7.7 Actividad", " Capítulo 7 Reportes con R Markdown En esta sección explicaré cómo usar R Markdown, si así lo deseas, puedes ver la clase que hice sobre este tema en este link. Su función principal es la generación de informes, documentos o presentaciones. Es una herramienta muy potente ya que permite escribir código en muchos lenguajes de programación a través de estructuras llamadas chunks. Soporta el lenguaje Markdown. Es posible escribir expresiones matemáticas entre signos de dólar ($ $) usando LaTeX. También acepta la opción de doble signo dólar ($ $ $ $). 7.1 La estructura YAML Esta entre tres guiones medios por arriba y abajo (---) Es la configuración inicial de R Markdown. Algunos parámetros que pueden ir en la estructura YAML son: title: Es para especificar el título del R Markdown (no confundir con nombre del archivo con extensión .Rmd) subtitle: Es para especificar el subtítulo del R Markdown. author: Acá se especifica le autor del R Markdown. date: En este parámetro se indica la fecha en que se está escribiendo el R Markdown. output: Este parámetro hay que especificarlo obligatoriamente, pues acá indicamos cuál es el formato del archivo de salida. Ejemplos: Una estructura YAML con salida en formato html. --- title: Taller de Software Estadístico subtitle: Módulo 3 author: CA FMAT &amp; CEFMAT date: 17 de febrero output: html_document --- Podemos usar el lenguaje html para personalizar el documento. ¡Les invitamos a que busquen el tema html que más les guste! En prettydoc y rmdformats. Una estructura YAML con salida en formato pdf: --- title: Informe coronavirus en chile author: Comisión de salud date: 17 de julio 2021 output: pdf_document --- Podemos usar todas las funciones de LaTeX en este caso, ¡Puede ser muy provechoso! Les invitamos a encontrar más opciones de personalización acá. 7.2 Markdown Es un lenguaje de marcado que facilita la escritura de texto a través de simples carácteres. Resumen: Código Resultado # Texto Texto ## Texto Texto ### Texto Texto #### Texto Texto _cursiva_ cursiva __negrita__ negrita \\(\\text{[Google](http://www.google.cl)}\\) Google `codigo` codigo 1. Texto 1 2. Texto 2 3. Texto 3 4. Texto 4 Texto 1 Texto 2 Texto 3 Texto 4 * Texto 1 * Texto 2 * Texto 3 * Texto 4 Texto 1 Texto 2 Texto 3 Texto 4 7.2.1 Tablas Se pueden hacer tablas rápidamente usando barras verticales (|) y guiones medios (-) Para entender mejor cómo crear tablas veamos el siguiente ejemplo: Para crear la siguiente tabla: Edad Nacimientos Mujeres TFR por 1000 20 20 100 200 21 25 100 250 22 30 100 300 23 35 100 350 24 40 100 400 Total 150 500 1500 20-24 150 500 300 Debemos usar el siguiente código. | Edad | Nacimientos | Mujeres | TFR por 1000 | |-------|-------------|---------|--------------| | 20 | 20 | 100 | 200 | | 21 | 25 | 100 | 250 | | 22 | 30 | 100 | 300 | | 23 | 35 | 100 | 350 | | 24 | 40 | 100 | 400 | | Total | 150 | 500 | 1500 | | 20-24 | 150 | 500 | 300 | 7.3 Chunks La siguiente estructura es un chunk de R. ```{r} ``` Dentro podemos escribir código en en lenguaje que especifiquemos en la llave {}. Esto es un chunk con código de Python: ```{python} for i in range(3): \\(\\ \\ \\ \\ \\) print(i) ``` Podemos nombrar un chunk para trabajar con más orden: ```{r IMPORTAR DATOS} data &lt;- rio::import(datos.csv) ``` 7.3.1 Parámetros de un chunk Dentro de las llaves pueden ir los siguientes parámetros: echo: Cuando el argumento es FALSE, muestra el output pero no el código. include: Cuando es FALSE, no muestra ni el código ni el output. result: Cuando es FALSE, muestra el código pero no el resultado. message: Cuando es FALSE, no muestra mensajes provocados por la ejecución del código. warning: Cuando es FALSE, no muestra advertencias provocadas por el código. fig.align: Puede recibir como argumentos a center, right y left. Pueden ver más opciones en este enlace. Ejemplo: ```{r GRAFICO 1, echo=FALSE, fig.align = center} ggplot(iris) + \\(\\ \\ \\ \\ \\) aes(Sepal.Length, Petal.Length) + \\(\\ \\ \\ \\ \\) geom_point(color = brown4) ``` Mostrará en el output un gráfico centrado, pero no el código que lo produce. 7.3.2 El chunk setup Al crear un archivo R Markdown, se creará un chunk por defecto, abajo de la estructura YAML, llamado setup y tendrá como parámetro include=FALSE. Es muy importante, ya que incluye las configuraciones iniciales de los chunks. Dentro de la función knitr::opts_chunk$set, podemos escribir nuevos parámetros que se aplicarán a TODOS los chunks. Ejemplo: ``` {r setup, include=FALSE} knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, fig.align = center) ``` Además, podemos agregar los packages que usaremos durante la utilización de R Markdown: ```{r setup, include=FALSE} knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, fig.align = center, comment = NA) # Packages require(tidyverse) require(DT) ``` 7.3.3 Chunks inline Son bastante útiles, nos permite usar un lenguaje de programación mientras escribimos. Su uso se debe hacer mediante acentos graves (` `) Debemos especificar el lenguaje que usaremos antes de usar código. Ejemplo: La media entre los números 2, 4 y 12 es ` r mean(c(2, 4, 12)) `. Producirá: La media entre los números 2, 4 y 12 es 6. Podemos llamar variables creadas anteriormente en el código. Ejemplo: media_Petal.Length &lt;- iris$Sepal.Length %&gt;% mean La media del largo de los pétalos de iris es ` r media_Petal.Length `. La media del largo de los pétalos de iris es 5.8433. 7.4 Tablas desde R En html, la mejor opción es usar la función reactable del package `reactable``, ya que es una opción interactiva. Ejemplo: grupos_iris &lt;- iris %&gt;% group_by(Species) %&gt;% summarize(max_Sepal.Length = max(Sepal.Length)) # require(DT) grupos_iris %&gt;% reactable::reactable() En formatos pdf, la mejor opción es usar la función kable del package knitr. Ejemplo # require(knitr) grupos_iris %&gt;% knitr::kable() Species max_Sepal.Length setosa 5.8 versicolor 7.0 virginica 7.9 Les invitamos a aprender más sobre tablas en el siguiente link. 7.5 Imágenes Podemos cargar imágenes usando la función include_graphics del package knitr. knitr::include_graphics(here::here(&quot;images&quot;, &quot;ejemplo.jpg&quot;)) 7.6 Reportes automáticos Se puede crear un template, e ir cambiando el argumento params. params es un parámetro de la estructura YAML. Muy útil para la generación de reportes automáticos. Ejemplo: --- title: Taller de Software Estadístico subtitle: Módulo 3 author: CA FMAT &amp; CEFMAT date: 17 de febrero output: html_document params: \\(\\ \\ \\)especie: setosa --- Creemos un histograma para la variable Sepal.Length, para la especie setosa de iris. require(magrittr) require(dplyr) require(ggplot2) iris_especie_Sepal.Length &lt;- iris %&gt;% filter(Species == params$especie) grafico_especie &lt;- ggplot(iris_especie_Sepal.Length) + aes(x = Sepal.Length) + geom_histogram(color = &quot;dodgerblue3&quot;, fill = &quot;dodgerblue4&quot;, alpha = 0.7) + labs(x = &quot;Sepal Length&quot;, y = &quot;Frecuencia&quot;, title = paste(&quot;Histograma de Sepal Lenth para la especie&quot;, params$especie, sep = &quot; &quot;)) + theme_bw() grafico_especie %&gt;% plotly::ggplotly() 7.7 Actividad Genere un reporte automático en R Markdown (formato html) que describa la situación en enero de 2021 respecto al coronavirus en Argentina, Chile y Perú. ¡Use toda su imaginación! "],["mis-proyectos.html", "Capítulo 8 Mis Proyectos 8.1 Visualización Interactiva del Coronavirus", " Capítulo 8 Mis Proyectos En esta sección quiero mostrar los principales proyectos que he realizado. 8.1 Visualización Interactiva del Coronavirus Mi principal motivación para realizar esta App interactiva realizada con Shiny y Flexdashboard, es mostrar a las personas, estadísticas interesantes sobre el Covid-19, incluso añadiendo la posibilidad de interactuar con los resultados. Puedes ingresar a la App desde este link. "],["palabras-finales.html", "Capítulo 9 Palabras Finales", " Capítulo 9 Palabras Finales ¡Espero que hayas disfrutado mucho el material! Esta es una pequeña base para empezar a investigar nuevos conocimientos en Estadística y Programación. ¡Tienes todo un mundo por descubrir! Te invito a explorarlo. writeLines(c(&#39;Realizado con cariño por Esteban Rucán Carrasco&#39;, &#39;¡Hasta pronto!&#39;)) Realizado con cariño por Esteban Rucán Carrasco ¡Hasta pronto! Si quieres agradecerme el material puedes hacerlo saber por Redes Sociales. Instagram Correo "],["referencias.html", "Capítulo 10 Referencias 10.1 Guía de Estilo 10.2 Principios de Visualización de Datos", " Capítulo 10 Referencias 10.1 Guía de Estilo PEP 8: https://blogs.upm.es/estudiaciencia/pep-8-la-guia-de-estilo-para-python/ tidyverse: https://style.tidyverse.org/ 10.2 Principios de Visualización de Datos Colores y formato de gráficos: https://www.datasketch.co "]]
